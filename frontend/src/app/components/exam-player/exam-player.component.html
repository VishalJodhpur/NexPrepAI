<div *ngIf="!attemptId">
  <button (click)="start()">Start Exam</button>
</div>

<div *ngIf="attemptId">
  <p>Time left: {{ formatTime(timeLeft) }}</p>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div formArrayName="responses">
      <div
        *ngFor="let ctrl of responses.controls; let i = index"
        [formGroupName]="i"
      >
        <!-- Question text -->
        <p>
          Q{{ i + 1 }}:
          {{
            sections[ctrl.value.sectionIndex]
              .questions[ctrl.value.questionIndex]
              .questionText
          }}
        </p>

        <!-- Options -->
        <div
          *ngFor="let opt of sections[ctrl.value.sectionIndex].questions[ctrl.value.questionIndex].options; let oi = index"
        >
          <label>
            <input
              type="radio"
              formControlName="selected"
              [value]="oi"
            />
            {{ opt.text }}
          </label>
        </div>
      </div>
    </div>

    <button type="submit">Submit Exam</button>
  </form>
</div>
